{% extends 'base.html'%}
{% load static %}
{% block content %}
<body style = "background-image: url({% static 'images/background1.2.jpg' %}); background-size: cover;background-position: center center;background-attachment: fixed;">
    <div class="container-fluid">
        <div class="row flex-nowrap wrapper">
            <div class="col-md-2 col-1 pl-0 pr-0 collapse width border-right sidebar vh-100">
                <div class="list-group border-0 card text-center text-md-left" id="sidebar">
                    <ul class="sidebar" style="font-size:1.8vw;">
                        <li class="tablink" onclick="openPage('Profile', this)" id="defaultOpen">Profile</li>
                        <li class="tablink" onclick="openPage('Addresses', this)">Address</li>
                        <li class="dropdown-btn">Diet
                            <i class="fa fa-caret-down"></i>
                        </li>
                        <div class="dropdown-container">
                            <a class="tablink" onclick="openPage('DietaryPreferences', this)">Diet Preference</a>
                            <br>
                            <a class="tablink" onclick="openPage('DietaryRestrictions', this) ">Diet Restriction</a>
                        </div>
                        <li class="tablink" onclick="openPage('Favorites', this)">Favorites</li>
                        <li class="tablink" onclick="openPage('OrderHistory', this)">Order History</li>
                        <li class="tablink" onclick="openPage('ReviewHistory', this)">Review History</li>
                    </ul>

                    <script>
                        var dropdown = document.getElementsByClassName("dropdown-btn");
                        var i;

                        for (i = 0; i < dropdown.length; i++) {
                            dropdown[i].addEventListener("click", function() {
                                this.classList.toggle("active");
                                var dropdownContent = this.nextElementSibling;
                                if (dropdownContent.style.display === "block") {
                                    dropdownContent.style.display = "none";
                                } else {
                                    dropdownContent.style.display = "block";
                                }
                            });
                        }

                    </script>

                </div>
            </div>
            <main class="col px-5 pl-md-2 pt-2 main">
                <div class="col-sm-1" style="background-color:#262626; padding-left:30px;">
                    <a href="#" data-target=".sidebar" data-toggle="collapse"><i class="fa fa-bars fa-3x py-2 p-1" style="color:white;"></i></a>
                </div>
                <div class="row" style="font-size: x-large;">
                    <div class="col-lg-1"></div>
                    <div class="col-lg-6">
                        <div id="profileui">

                            <!-- PROFILE INFORMATION -->
                            <div id="Profile" class="tabcontent">
                                <div class="container">

                                    {% for user in users %}
                                        <div style="border: 5px solid black;padding:25px;">
                                            <div class="row">
                                                <div class="col-sm-4">
                                                    <img style="width:14vw;" src="{% static 'images/profileholder.png' %}" alt="Bearstomer" class="img-rounded img-responsive" />
                                                </div>
                                                <div class="col-sm-7">

                                                    <h1 style="color:#0094FF; font-size:2.0vw;"> Hello, <p style="margin:0 0 0 0;display: inline-block;" >{{user.FirstName}}</p>!</h1>
                                                    {% for last in lastOrder %}
                                                    Last order on: {{last.OrderDate}} at {{last.OrderTime}} from {{last.Restaurants}}<br>
                                                        
                                                          Delivered to {{last.StreetAddress}} {{last.AptNum}}, {{last.City}}, {{last.StateAbbv}} {{last.Zip}}
                                                        {% endfor %}

                                                    <input style="font-size:1.5vw;" type="submit" name="submit" value="View Orders" class="btn btn-primary btn-lock btn-block" onclick="openPage('OrderHistory', this)">
                                                    <input style="font-size:1.5vw;" type="submit" name="submit" value="New Order" class="btn btn-primary btn-lock btn-block">


                                                </div>
                                            </div>
                                        </div>
                                        <br>
                                        <h1 style="text-decoration: underline;color:#0094FF;border: 5px solid black; padding:10px; font-size: 1.5vw;">Contact Information</h1>
                                        <div style= "font-family:Mono; font-size: 1.3vw;">
                                            <b>Name:</b><p style="margin:0 0 0 0;display: inline-block;" id="First">{{user.FirstName}}</p> <p style="margin:0 0 0 0;display:inline-block;" id="Last">{{user.LastName}}</p><br>
                                            <b>Phone Number:</b>  {{user.Phone}}<br>
                                            <b>Email Address:</b> {{user.Email}}<br>
                                            <br>
                                        </div>
                                        <input style="font-size:1.5vw;" onclick="openPage('EditProfile', this)" type="submit" name="submit" value="Edit Contact Information" class="btn btn-primary btn-lock btn-block">
                                        <br>
                                        <h1 style="text-decoration: underline;color:#0094FF;border: 5px solid black;padding:10px; font-size: 1.5vw;">Password</h1>
                                        <p style="font-family:Mono; font-size: 1.3vw;">It is recommended that you change your password regularly!</p>
                                        <input style="font-size:1.5vw;" onclick="openPage('ChangePassword', this)" type="submit" name="submit" value="Change Password" class="btn btn-primary btn-block">
                                    {% endfor %}

                                </div>
                            </div>


                            <!-- PROFILE INFORMATION EDIT -->
                            <div id="EditProfile" class="tabcontent">
                                <div class="container">
                                    <form action="" method="POST">
                                        {% csrf_token %}
                                        {% for user in users %}
                                            <div style="border: 5px solid black;padding:25px;">
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                        <img style="width:14vw;" src="{% static 'images/profileholder.png' %}" alt="Bearstomer" class="img-rounded img-responsive" />
                                                    </div>
                                                    <div class="col-sm-7">
                                                        <h1 style="color:#0094FF; font-size:2.0vw;"> Edit Contact Information </h1>
                                                    </div>
                                                </div>
                                            </div>
                                            <br>
                                            <h1 style="text-decoration: underline;color:#0094FF;border: 5px solid black; padding:10px; font-size:1.5vw;">Contact Information</h1>
                                            <div style= "font-family:Mono; font-size:1.3vw;">
                                                <b>Name:</b><input type="text" name="firstname" value ="{{user.FirstName}}"></input> <input type="text" name="lastname" value ="{{user.LastName}}"></input><br>
                                                <b>Phone Number:</b>  <input type="text" name="phonenumber" value ="{{user.Phone}}"></input><br>
                                                <b>Email Address:</b> <input type="text" name="email" value ="{{user.Email}}"></input><br>

                                            </div>
                                        {% endfor %}
                                        <br>
                                        <input style="font-size:1.5vw;" class="btn btn-primary btn-lock btn-block" type="submit" value="Update">
                                    </form>
                                </div>
                            </div>

                            <!-- CHANGE PASSWORD -->
                            <div id="ChangePassword" class="tabcontent">
                                <form action="" method="POST">
                                    {% csrf_token %}
                                    {% for user in users %}
                                        <div style="border: 5px solid black;padding:25px;">
                                            <div class="row">
                                                <div class="col-sm-4">
                                                    <img style="width:14vw;" src="{% static 'images/profileholder.png' %}" alt="Bearstomer" class="img-rounded img-responsive" />
                                                </div>
                                                <div class="col-sm-7">
                                                    <h1 style="color:#0094FF; font-size:2.0vw;"> Change Password </h1>
                                                </div>
                                            </div>
                                        </div>
                                        <br>
                                        <h1 style="text-decoration: underline;color:#0094FF;border: 5px solid black; padding:10px; font-size:1.5vw;">Contact Information</h1>
                                        <div style= "font-family:Mono; font-size:1.3vw;">
                                            <b>Name:</b><p style="margin:0 0 0 0;display: inline-block;" id="First">{{user.FirstName}}</p> <p style="margin:0 0 0 0;display:inline-block;" id="Last">{{user.LastName}}</p><br>
                                            <b>Phone Number:</b>  {{user.Phone}}<br>
                                            <b>Email Address:</b> {{user.Email}}<br>

                                        </div>
                                    {% endfor %}
                                    <br>
                                    <h1 style="text-decoration: underline;color:#0094FF;border: 5px solid black;padding:10px; font-size:1.5vw;">Password</h1>
                                    <b style="font-family:Mono; font-size:1.3vw;">Old Password:</b> <input type="password" name="oldPassword" value =""></input><br>
                                    <b style="font-family:Mono; font-size:1.3vw;">New Password:</b> <input type="password" name="newPassword" value =""></input><br><br>
                                    <input style="font-size:1.5vw;" class="btn btn-primary btn-lock btn-block" type="submit" value="Update">
                                </form>
                            </div>



                            <!-- ADDRESS INFORMATION -->
                            <div id="Addresses" class="tabcontent">
                                <div class="container">
                                    <div style="border: 5px solid black; padding: 25px;">
                                        <h1>Your Saved Addresses</h1>
                                    </div>

                                    {% for address in addresses %}
                                        <div style = "border: 5px solid black; padding: 25px; font-size: 1vw; font-family: Mono;">
                                            <h4><u>{{address.AddressType}}</u></h4>
                                            {{address.zip}} {{address.apt}} {{address.street}} <br>
                                            {{address.city}} {{address.state}}
                                            <br><br>
                                            <input style="font-size:1.5vw; font-family:Bearskin;" class="btn btn-primary btn-lock btn-block" onclick="openPage('EditAddresses', this);" value="Edit">
                                        </div>
                                    {% endfor %}

                                    <br><br>
                                    <input style="font-size:1.5vw;" class="btn btn-primary btn-lock btn-block" onclick="openPage('NewAddress', this);" value="New Address">
                                </div>
                            </div>

                            <!-- ADDRESS INFORMATION EDIT -->
                            <div id="EditAddresses" class="tabcontent">
                                <div class="container">
                                    <form action="" method="POST">
                                        {% csrf_token %}
                                        <div style="border: 5px solid black; padding: 20px;">
                                            <h1>Your Saved Addresses</h1>
                                        </div>

                                        <!-- Select Delivery Address dropdown -->
                                        <div class="form-group form-inline">
                                            <label style="color: black; font-family: sans-seriff; font-weight: bold;">Select Delivery Address:</label>
                                            <select class="form-control" id="selectAddress"   name="selectaddress"  style="font-family: sans-seriff;" onchange="check()" value="{{address}}">
                                            {% for address in addresses %}
                                                <option value="{{address.AddressType}}"  id="{{address.AddressType}}" >{{address.AddressType}}</option>
                                                
                                            {% endfor %}
                                            <option value="new">New Address</option>
                                            </select>
                                        </div>
                                        
                                        {% for address in addresses %}
                                        
                                        <div class="AddressOptions" id="{{address.AddressType}}" style="display: none"> 
                                          <div id="row" >
                                            <label style="color: black; font-family: Bearskin">Save Address As:</label>
                                            <input style="font-family: sans-seriff;" class="form-control" id="addName {{address.AddressType}}" name="addName {{address.AddressType}}" value ="{{address.AddressType}}" placeholder="Home, Parent House">
                                        </div>  
                                        <div class="row">
                                            <label style="color: black; font-family: Bearskin">Street: </label>
                                            <input type="text" class="form-control" name="street {{address.AddressType}}" value ="{{address.street}}"></input>
                                        </div>

                                        <div class="row">
                                            <label style="color: black; font-family: Bearskin">Aprt Number: </label>
                                            <input type="text" class="form-control" name="apt {{address.AddressType}}" value="{{address.apt}}"></input>
                                        </div>

                                        <div class="row">
                                            <label style="color: black; font-family: Bearskin">City: </label>
                                            <input type="text" class="form-control" name="city {{address.AddressType}}" value="{{address.city}}"></input>
                                        </div>

                                        <!-- STATE DROPDOWN -->
                                        <div class="row" style="width: fit-content">
                                            <label style="color: black; font-family: Bearskin">State: </label>
                                            <select class="form-control" id="stateselect {{address.AddressType}}" value="{{address.state}}"  name="state {{address.AddressType}}"  style="font-family: sans-seriff;" value="{{address.state}}">
                                                <option value="AL">Alabama</option>
                                                <option value="AK">Alaska</option>
                                                <option value="AZ">Arizona</option>
                                                <option value="AR">Arkansas</option>
                                                <option value="CA">California</option>
                                                <option value="CO">Colorado</option>
                                                <option value="CT">Connecticut</option>
                                                <option value="DE">Delaware</option>
                                                <option value="DC">District Of Columbia</option>
                                                <option value="FL">Florida</option>
                                                <option value="GA">Georgia</option>
                                                <option value="HI">Hawaii</option>
                                                <option value="ID">Idaho</option>
                                                <option value="IL">Illinois</option>
                                                <option value="IN">Indiana</option>
                                                <option value="IA">Iowa</option>
                                                <option value="KS">Kansas</option>
                                                <option value="KY">Kentucky</option>
                                                <option value="LA">Louisiana</option>
                                                <option value="ME">Maine</option>
                                                <option value="MD">Maryland</option>
                                                <option value="MA">Massachusetts</option>
                                                <option value="MI">Michigan</option>
                                                <option value="MN">Minnesota</option>
                                                <option value="MS">Mississippi</option>
                                                <option value="MO">Missouri</option>
                                                <option value="MT">Montana</option>
                                                <option value="NE">Nebraska</option>
                                                <option value="NV">Nevada</option>
                                                <option value="NH">New Hampshire</option>
                                                <option value="NJ">New Jersey</option>
                                                <option value="NM">New Mexico</option>
                                                <option value="NY">New York</option>
                                                <option value="NC">North Carolina</option>
                                                <option value="ND">North Dakota</option>
                                                <option value="OH">Ohio</option>
                                                <option value="OK">Oklahoma</option>
                                                <option value="OR">Oregon</option>
                                                <option value="PA">Pennsylvania</option>
                                                <option value="RI">Rhode Island</option>
                                                <option value="SC">South Carolina</option>
                                                <option value="SD">South Dakota</option>
                                                <option value="TN">Tennessee</option>
                                                <option value="TX">Texas</option>
                                                <option value="UT">Utah</option>
                                                <option value="VT">Vermont</option>
                                                <option value="VA">Virginia</option>
                                                <option value="WA">Washington</option>
                                                <option value="WV">West Virginia</option>
                                                <option value="WI">Wisconsin</option>
                                                <option value="WY">Wyoming</option>
                                            </select>
                                        </div>

                                        <div class="row">
                                            <label style="color: black; font-family: Bearskin">Zip Code: </label>
                                            <input type="text" class="form-control" name="zip {{address.AddressType}}" value="{{address.zip}}"></input>
                                        </div>
                                     </div>
                                        {% endfor %}
                                        <div class="NewAddress" id="NewAddress" style="display: none"> 
                                            <div id="row" >
                                                <label style="font-family: sans-seriff; font-weight: bold;">Save Address As:</label>
                                                <input style="font-family: sans-seriff;" class="form-control" id="addName new" name="addName new" value ="" placeholder="Home, Parent House">
                                            </div>
                                        <div class="row"> 
                                            <label style="color: black; font-family: Bearskin">Street: </label>
                                            <input type="text" class="form-control" name="street new" ></input>
                                        </div>

                                        <div class="row">
                                            <label style="color: black; font-family: Bearskin">Aprt Number: </label>
                                            <input type="text" class="form-control" name="apt new" ></input>
                                        </div>

                                        <div class="row">
                                            <label style="color: black; font-family: Bearskin">City: </label>
                                            <input type="text" class="form-control" name="city new" ></input>
                                        </div>

                                        <!-- STATE DROPDOWN -->
                                        <div class="row" style="width: fit-content">
                                            <label style="color: black; font-family: Bearskin">State: </label>
                                            <select class="form-control" id="stateselect new" value="{{address.state}}"  name="state new"  style="font-family: sans-seriff;" value="{{address.state}}">
                                                <option value="AL">Alabama</option>
                                                <option value="AK">Alaska</option>
                                                <option value="AZ">Arizona</option>
                                                <option value="AR">Arkansas</option>
                                                <option value="CA">California</option>
                                                <option value="CO">Colorado</option>
                                                <option value="CT">Connecticut</option>
                                                <option value="DE">Delaware</option>
                                                <option value="DC">District Of Columbia</option>
                                                <option value="FL">Florida</option>
                                                <option value="GA">Georgia</option>
                                                <option value="HI">Hawaii</option>
                                                <option value="ID">Idaho</option>
                                                <option value="IL">Illinois</option>
                                                <option value="IN">Indiana</option>
                                                <option value="IA">Iowa</option>
                                                <option value="KS">Kansas</option>
                                                <option value="KY">Kentucky</option>
                                                <option value="LA">Louisiana</option>
                                                <option value="ME">Maine</option>
                                                <option value="MD">Maryland</option>
                                                <option value="MA">Massachusetts</option>
                                                <option value="MI">Michigan</option>
                                                <option value="MN">Minnesota</option>
                                                <option value="MS">Mississippi</option>
                                                <option value="MO">Missouri</option>
                                                <option value="MT">Montana</option>
                                                <option value="NE">Nebraska</option>
                                                <option value="NV">Nevada</option>
                                                <option value="NH">New Hampshire</option>
                                                <option value="NJ">New Jersey</option>
                                                <option value="NM">New Mexico</option>
                                                <option value="NY">New York</option>
                                                <option value="NC">North Carolina</option>
                                                <option value="ND">North Dakota</option>
                                                <option value="OH">Ohio</option>
                                                <option value="OK">Oklahoma</option>
                                                <option value="OR">Oregon</option>
                                                <option value="PA">Pennsylvania</option>
                                                <option value="RI">Rhode Island</option>
                                                <option value="SC">South Carolina</option>
                                                <option value="SD">South Dakota</option>
                                                <option value="TN">Tennessee</option>
                                                <option value="TX">Texas</option>
                                                <option value="UT">Utah</option>
                                                <option value="VT">Vermont</option>
                                                <option value="VA">Virginia</option>
                                                <option value="WA">Washington</option>
                                                <option value="WV">West Virginia</option>
                                                <option value="WI">Wisconsin</option>
                                                <option value="WY">Wyoming</option>
                                            </select>
                                        </div>

                                        <div class="row">
                                            <label style="color: black; font-family: Bearskin">Zip Code: </label>
                                            <input type="text" class="form-control" name="zip new" ></input>
                                        </div>
                            
                                         </div> 
                                        <div class="row">
                                            <input type="submit" value="Save">
                                        </div>
                                    </form>
                                </div>
                            </div>


                            <!-- DIET PREFERENCE INFORMATION EDIT -->
                            <div id="DietaryPreferences" class="tabcontent">
                                <div class ="container">
                                    <form action="" method="POST">
                                        {% csrf_token %}
                                        <div style="border: 5px solid black; padding: 25px;">
                                            <h1>Diet Preferences</h1>
                                        </div>

                                        <div class="container">
                                            <div class="row">
                                                <div class="col" style ="border: 5px solid black; padding: 25px; font-family:Mono; font-size:1.0vw;">
                                                    <u>Classification & Health</u>
                                                    <div class ="row">
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Diabetic" id="Diabetic" name="example1" {{p_check_list.0}}>
                                                                <label class="custom-control-label" for="Diabetic" style="color:black;font-family:Mono;">Diabetic</label>
                                                            </div>
                                                        </div>
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Gluten-Free" id="Gluten-Free" name="example1" {{p_check_list.1}}>
                                                                <label class="custom-control-label" for="Gluten-Free" style="color:black;font-family:Mono;">Gluten-Free</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class ="row">
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Vegetarian" id="Vegetarian" name="example1" {{p_check_list.2}}>
                                                                <label class="custom-control-label" for="Vegetarian" style="color:black;font-family:Mono;">Vegetarian</label>
                                                            </div>
                                                        </div>
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Vegan" id="Vegan" name="example1" {{p_check_list.3}}>
                                                                <label class="custom-control-label" for="Vegan" style="color:black;font-family:Mono;">Vegan</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class = "row">
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Pescetarian" id="Pescetarian" name="example1" {{p_check_list.4}}>
                                                                <label class="custom-control-label" for="Pescetarian" style="color:black;font-family:Mono;">Pescetarian</label>
                                                            </div>
                                                        </div>
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Kosher" id="Kosher" name="example1" {{p_check_list.5}}>
                                                                <label class="custom-control-label" for="Kosher" style="color:black;font-family:Mono;">Kosher</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class ="row">
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Sugar-Free" id="Sugar-Free" name="example1" {{p_check_list.17}}>
                                                                <label class="custom-control-label" for="Sugar-Free" style="color:black;font-family:Mono;">Sugar-Free</label>
                                                            </div>
                                                        </div>
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Low-Sodium" id="Low Sodium" name="example1" {{p_check_list.18}}>
                                                                <label class="custom-control-label" for="Low Sodium" style="color:black;font-family:Mono;">Low Sodium</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class ="row">
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Low-Cholesterol" id="Low Cholesterol" name="example1" {{p_check_list.19}}>
                                                                <label class="custom-control-label" for="Low Cholesterol" style="color:black;font-family:Mono;">Low Cholesterol</label>
                                                            </div>
                                                        </div>
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Organic" id="Organic" name="example1" {{p_check_list.20}}>
                                                                <label class="custom-control-label" for="Organic" style="color:black;font-family:Mono;">Organic</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class = "row">
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Non-GMO" id="Non-GMO" name="example1" {{p_check_list.21}}>
                                                                <label class="custom-control-label" for="Non-GMO" style="color:black;font-family:Mono;">Non-GMO</label>
                                                            </div>
                                                        </div>
                                                        <div class="col" style="border: 2px solid black;">

                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col" style = "border: 5px solid black; padding: 25px; font-family:Mono; font-size:1.0vw;">
                                                    <u>Diet</u>
                                                    <div class = "row">
                                                        <div class="col" style="border: 2px solid black;  min-width:11vw;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Paleo Diet" id="Paleo Diet" name="example1" {{p_check_list.6}}>
                                                                <label class="custom-control-label" for="Paleo Diet" style="color:black;font-family:Mono;">Paleolithic</label>
                                                            </div>
                                                        </div>
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Keto Diet" id="Keto Diet" name="example1" {{p_check_list.8}}>
                                                                <label class="custom-control-label" for="Keto" style="color:black;font-family:Mono;">Keto</label>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class = "row">
                                                        <div class="col" style="border: 2px solid black;  min-width:11vw;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Mediterranean" id="Mediterranean" name="example1" {{p_check_list.7}}>
                                                                <label class="custom-control-label" for="Mediterranean" style="color:black;font-family:Mono;">Mediterranean</label>
                                                            </div>

                                                        </div>
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="High Protein" id="High Protein" name="example1" {{p_check_list.9}}>
                                                                <label class="custom-control-label" for="High Protein" style="color:black;font-family:Mono;">High Protein</label>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class = "row">
                                                        <div class="col" style="border: 2px solid black;  min-width:11vw;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Low Carb" id="Low Carb" name="example1" {{p_check_list.10}}>
                                                                <label class="custom-control-label" for="Low Carb" style="color:black;font-family:Mono;">Low Carb</label>
                                                            </div>
                                                        </div>
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Low Fat" id="Low Fat" name="example1" {{p_check_list.11}}>
                                                                <label class="custom-control-label" for="Low Fat" style="color:black;font-family:Mono;">Low Fat</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col" style = "border: 5px solid black; padding: 25px; font-family:Mono; font-size:1.0vw;">
                                                    <u>Style</u>
                                                    <div class = "row">
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Fast Food" id="Fast Food" name="example1" {{p_check_list.12}}>
                                                                <label class="custom-control-label" for="Fast Food" style="color:black;font-family:Mono;">Fast Food</label>
                                                            </div>
                                                        </div>
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Street Food" id="Street Food" name="example1" {{p_check_list.13}}>
                                                                <label class="custom-control-label" for="Street Food" style="color:black;font-family:Mono;">Street Food</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class = "row">
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Fresh Food" id="Fresh Food" name="example1" {{p_check_list.14}}>
                                                                <label class="custom-control-label" for="Fresh Food" style="color:black;font-family:Mono;">Fresh Food</label>
                                                            </div>
                                                        </div>
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Raw Food" id="Raw Food" name="example1" {{p_check_list.15}}>
                                                                <label class="custom-control-label" for="Raw Food" style="color:black;font-family:Mono;">Raw Food</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class = "row">
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Seafood" id="Seafood" name="example1" {{p_check_list.16}}>
                                                                <label class="custom-control-label" for="Seafood" style="color:black;font-family:Mono;">Seafood</label>
                                                            </div>
                                                        </div>
                                                        <div class="col" style="border: 2px solid black;text-align:center;">

                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col" style = "border: 5px solid black; padding: 25px; font-family:Mono; font-size:1.0vw;">
                                                    <u>Region</u>
                                                    <div class = "row">
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Asian" id="Asian" name="example1" {{p_check_list.22}}>
                                                                <label class="custom-control-label" for="Asian" style="color:black;font-family:Mono;">Asian</label>
                                                            </div>
                                                        </div>
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="African" id="African" name="example1" {{p_check_list.23}}>
                                                                <label class="custom-control-label" for="African" style="color:black;font-family:Mono;">African</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class = "row">
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="American" id="American" name="example1" {{p_check_list.24}}>
                                                                <label class="custom-control-label" for="American" style="color:black;font-family:Mono;">American</label>
                                                            </div>
                                                        </div>
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Latin" id="Latin" name="example1" {{p_check_list.25}}>
                                                                <label class="custom-control-label" for="Latin" style="color:black;font-family:Mono;">Latin</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class = "row">
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="European" id="European" name="example1" {{p_check_list.26}}>
                                                                <label class="custom-control-label" for="European" style="color:black;font-family:Mono;">European</label>
                                                            </div>
                                                        </div>
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Middle Eastern" id="Middle Eastern" name="example1" {{p_check_list.27}}>
                                                                <label class="custom-control-label" for="Middle Eastern" style="color:black;font-family:Mono;">Middle Eastern</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class = "row">
                                                        <div class="col" style="border: 2px solid black;">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input" name="p_checks[]" value="Pacific" id="Pacific" name="example1" {{p_check_list.28}}>
                                                                <label class="custom-control-label" for="Pacific" style="color:black;font-family:Mono;">Pacific</label>
                                                            </div>
                                                        </div>
                                                        <div class="col" style="border: 2px solid black;">

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <br>
                                        <input style="font-size:1.5vw; font-family:Bearskin;" class="btn btn-primary btn-lock btn-block" type="submit" value="Update">

                                    </form>
                                </div>
                            </div>



                            <!-- DIET RESTRICTION INFORMATION -->
                            <div id="DietaryRestrictions" class="tabcontent">
                                <div class ="container">
                                    <form action="" method="POST">
                                    {% csrf_token %}
                                        <div style="border: 5px solid black; padding: 25px;">
                                            <h1>Diet Restrictions</h1>
                                        </div>

                                        <p>Check all restrictions that apply.</p>

                                        <div class="col" style ="border: 5px solid black; padding: 25px; font-family:Mono; font-size:1.0vw;">
                                            <u>Common Allergies</u>
                                            <div class = "row">
                                                <div class="col" style="border: 2px solid black;">
                                                    <div class="custom-control custom-checkbox">
                                                        <input type="checkbox" class="custom-control-input" name="a_checks[]" value="Dairy" id="Dairy" name="example1" {{check_list.0}}>
                                                        <label class="custom-control-label" for="Dairy" style="color:black;font-family:Mono;">Dairy</label>
                                                    </div>
                                                </div>
                                                <div class="col" style="border: 2px solid black;">
                                                    <div class="custom-control custom-checkbox">
                                                        <input type="checkbox" class="custom-control-input" name="a_checks[]" value="Tree Nuts" id="Tree Nuts" name="example1" {{check_list.2}}>
                                                        <label class="custom-control-label" for="Tree Nuts" style="color:black;font-family:Mono;">Tree Nuts</label>
                                                    </div>
                                                </div>
                                                <div class="col" style="border: 2px solid black;">
                                                    <div class="custom-control custom-checkbox">
                                                        <input type="checkbox" class="custom-control-input" name="a_checks[]" value="Eggs" id="Eggs" name="example1" {{check_list.1}}>
                                                        <label class="custom-control-label" for="Eggs" style="color:black;font-family:Mono;">Eggs</label>
                                                    </div>
                                                </div>
                                                <div class="col" style="border: 2px solid black;">
                                                    <div class="custom-control custom-checkbox">
                                                        <input type="checkbox" class="custom-control-input" name="a_checks[]" value="Wheat" id="Wheat" name="example1" {{check_list.3}}>
                                                        <label class="custom-control-label" for="Wheat" style="color:black;font-family:Mono;">Wheat</label>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class = "row">
                                                <div class="col" style="border: 2px solid black;">
                                                    <div class="custom-control custom-checkbox">
                                                        <input type="checkbox" class="custom-control-input" name="a_checks[]" value="Peanuts" id="Peanuts" name="example1" {{check_list.4}}>
                                                        <label class="custom-control-label" for="Peanuts" style="color:black;font-family:Mono;">Peanuts</label>
                                                    </div>
                                                </div>
                                                <div class="col" style="border: 2px solid black;">
                                                    <div class="custom-control custom-checkbox">
                                                        <input type="checkbox" class="custom-control-input" name="a_checks[]" value="Soy" id="Soy" name="example1" {{check_list.5}}>
                                                        <label class="custom-control-label" for="Soy" style="color:black;font-family:Mono;">Soy</label>
                                                    </div>
                                                </div>
                                                <div class="col" style="border: 2px solid black;">
                                                    <div class="custom-control custom-checkbox">
                                                        <input type="checkbox" class="custom-control-input" name="a_checks[]" value="Fish" id="Fish" name="example1" {{check_list.6}}>
                                                        <label class="custom-control-label" for="Fish" style="color:black;font-family:Mono;">Fish</label>
                                                    </div>
                                                </div>
                                                <div class="col" style="border: 2px solid black;">
                                                    <div class="custom-control custom-checkbox">
                                                        <input type="checkbox" class="custom-control-input" name="a_checks[]" value="Shellfish" id="Shellfish" name="example1" {{check_list.7}}>
                                                        <label class="custom-control-label" for="Shellfish" style="color:black;font-family:Mono;">Shellfish</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <br>
                                        <input style="font-size:1.5vw; font-family:Bearskin;" class="btn btn-primary btn-lock btn-block" type="submit" value="Update">
                                        <p>{{response}}</p>
                                    </form>
                                </div>
                            </div>


                            <!-- FAVORITES INFORMATION -->
                            <div id="Favorites" class="tabcontent">
                                <div class="container">
                                    <div style="border: 5px solid black; padding: 10px;">
                                        <h1>Favorite Restaurants</h1>
                                    </div>
                                    <p style="font-family:Mono; font-size: 1.5vw;">Your favorite restaurants based on your highest rated orders.</p>

                                    <div class="overflow-auto p-3 mb-3 mb-md-0 mr-md-3 bg-light" style="max-width: 90vw; max-height: 100vh;">

                                        <div class="container-fluid">
                                            <div class="row">
                                                <div class="col-12 mt-3">

                                                   <!-- For every restaurant in favorites -->
                                                    <div class="card">
                                                        <div class="card-horizontal">
                                                            <div class="img-square-wrapper">
                                                                <!--<img class="" src=" "> -->
                                                            </div>
                                                            <div class="card-body">
                                                                <div class = "row">
                                                                    <div class="col">
                                                                        <h4 class="card-title">Restaurant Name</h4>
                                                                    </div>
                                                                    <div class="col float-right">
                                                                        <input style="font-size:1.5vw; font-family:Bearskin;" class="btn btn-primary"  value="Order Again">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- End for every restaurant in favorites -->

                                                </div>
                                            </div>
                                        </div>

                                    </div>

                                </div>
                            </div>

                            <!-- ORDER HISTORY INFORMATION -->
                            <div id="OrderHistory" class="tabcontent">
                                <div class="container">
                                    <div style="border: 5px solid black; padding: 10px;">
                                        <h1>Order History</h1>
                                    </div>

                                    <div class="overflow-auto p-3 mb-3 mb-md-0 mr-md-3 bg-light" style="max-width: 90vw; max-height: 100vh;">

                                        <div class="container-fluid">
                                            <div class="row">
                                                <div class="col-12 mt-3">

                                                   <!-- For Order History -->
                                                   {% for order in history %}
                                                    <div class="card">
                                                        <div class="card-horizontal">
                                                            <div class="img-square-wrapper">
                                                                
                                                                <!--<img class="" src=" "> -->
                                                            </div>
                                                            <div class="card-body">
                                                                <div class = "row">
                                                                    <div class="col">
                                                                        <h4 class="card-title">Order Num: <b style="font-family:Mono;" id="{{order.DeliveryID}}" data-order-id="{{order.DeliveryID}}"  >{{order.DeliveryID}}</b></h4>
                                                                        <p class="card-text" style="font-family:Mono;font-size:1.3vw;">
                                                                            Date: {{order.OrderDate}}
                                                                            Total Spent: {{order.Total}}
                                                                            Restaurants Ordered From: {{order.Restaurants}}
                                                                        </p>
                                                                    </div>
                                                                    <div class="col float-right">
                                                                        <input style="font-size:1.5vw; font-family:Bearskin;" class="btn btn-primary"  value="Order Again">
                                                                        <form action = "../review">
                                                                        <input style="font-size:1.5vw; font-family:Bearskin;" class="btn btn-primary"  value="Review" onclick="createReview({{order.DeliveryID}});"> <!-- onclick="reviewOrder()"-->
                                                                       
                                                                        </form>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    {% endfor %}
                                                    <input type="hidden" name="OrderNumber" id="OrderNumber">
                                                    <!-- End order history-->

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <!-- REVIEW HISTORY INFORMATION -->
                            <div id="ReviewHistory" class="tabcontent">
                                <div class="container">
                                    <div style="border: 5px solid black; padding: 10px;">
                                        <h1>Review History</h1>
                                    </div>

                                    <div class="overflow-auto p-3 mb-3 mb-md-0 mr-md-3 bg-light" style="max-width: 90vw; max-height: 100vh;">

                                        <div class="container-fluid">
                                            <div class="row">
                                                <div class="col-12 mt-3">

                                                   <!-- For Review History -->
                                                   {% for review in reviews %}
                                                    <div class="card">
                                                        <div class="card-horizontal" >
                                                            <script> setRating({{review.DeliveryID}},{{review.ReviewRating}},"{{review.ReviewComment}}");
                                                            function setRating(deliveryID,star,comment){
                                                                            var str1 = 'rstar1'
                                                                            var str2 = 'rstar2'
                                                                            var str3 = 'rstar3'
                                                                            var str4 = 'rstar4'
                                                                            var str5 = 'rstar5'
                                                                            var str6 = str1.concat(' ', deliveryID,' ',comment);
                                                                            var str7 = str2.concat(' ', deliveryID,' ',comment);
                                                                            var str8 = str3.concat(' ', deliveryID,' ',comment);
                                                                            var str9 = str4.concat(' ', deliveryID,' ',comment);
                                                                            var str10 = str5.concat(' ', deliveryID,' ',comment);
                                                                            switch(star) {
                                                                                case 5:
                                                                                    
                                                                                    document.getElementById(str6).style.color = 'yellow';
                                                                                    document.getElementById(str7).style.color = 'yellow';
                                                                                    document.getElementById(str8).style.color = 'yellow';
                                                                                    document.getElementById(str9).style.color = 'yellow';
                                                                                    document.getElementById(str10).style.color = 'yellow';
                                                                                    break;
                                                                                case 4:
                                                                                    document.getElementById(str10).style.color = 'black';
                                                                                    document.getElementById(str9).style.color = 'yellow';
                                                                                    document.getElementById(str8).style.color = 'yellow';
                                                                                    document.getElementById(str7).style.color = 'yellow';
                                                                                    document.getElementById(str6).style.color = 'yellow';
                                                                                    break;
                                                                                case 3:
                                                                                    document.getElementById(str10).style.color = 'black';
                                                                                    document.getElementById(str9).style.color = 'black';
                                                                                    document.getElementById(str8).style.color = 'yellow';
                                                                                    document.getElementById(str7).style.color = 'yellow';
                                                                                    document.getElementById(str6).style.color = 'yellow';
                                                                                    break;
                                                                                case 2:
                                                                                    document.getElementById(str9).style.color = 'black';
                                                                                    document.getElementById(str8).style.color = 'black';
                                                                                    document.getElementById(str7).style.color = 'yellow';
                                                                                    document.getElementById(str6).style.color = 'yellow';
                                                                                    break;
                                                                                case 1:
                                                                                    document.getElementById(str9).style.color = 'black';
                                                                                    document.getElementById(str8).style.color = 'black';
                                                                                    document.getElementById(str7).style.color = 'black';
                                                                                    document.getElementById(str6).style.color = 'yellow';
                                                                                  break;
                                                                                
                                                                            }

                                                                            
                                                                        
                                                                        
                                                                        }
                                                            </script>
                                                            <div class="card-body">
                                                                <div class = "row">
                                                                    <div class="col">
                                                                        <h4 class="card-title">Restaurant Name: {{review.restaurant}}</h4>
                                                                        <p class="card-text" style="font-family:Mono;font-size:1.3vw;">
                                                                            Order Num: {{review.DeliveryID}}
                                                                            <div class="row" style="padding-left:10px;">
                                                                                <div class="ratebox text-center" data-id="0" data-rating="{{ review.ReviewRating }}"></div>
                                                                            </div>
                                                                            
                                                                        </p>
                                                                    </div>

                                                                    <div class="col float-right">
                                                                        <input style="font-size:1.5vw; font-family:Bearskin;" class="btn btn-primary float-right"  value="Edit">
                                                                    </div>
                                                                </div>

                                                                <!-- REVIEW COMMENT -->
                                                                <i style ="font-family:Mono; font-size:1.3vw;">
                                                                    <div style="white-space:nowrap; width:1vw; overflow:hidden; text-overflow:ellipsis; display:inline-block;">"</div>
                                                                    <div id="reviewQuote" style="white-space:nowrap; width:25vw; overflow:hidden; text-overflow:ellipsis; display:inline-block;">
                                                                        <!-- PLACE REVIEW COMMENT HERE -->
                                                                        <!-- Ex: --> {{review.ReviewComment}}
                                                                    </div>
                                                                    <div style="white-space:nowrap; width:1vw; overflow:hidden; text-overflow:ellipsis; display:inline-block;">"</div>
                                                                </i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    {% endfor %}
                                                    <!-- End review history-->

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <script>

                    tabcontent = document.getElementsByClassName("tabcontent");
                    $(tabcontent).hide();
                    
                    
                    function createReview(orderid){
                        $("#OrderNumber").val(orderid);
                        // Set selected order as the selected order
                        var selectedOrder = orderid;
                        
                        Cookies.set('order',selectedOrder); // Add order cookie
                        window.location.href='../review/';
                    }

                    /* TAB CONTENT */
                    function openPage(pageName,element) {

                        if(pageName != "Profile"){
                            var orgurl = window.location.protocol + "/" + window.location.host +"/profile"
                            var newurl = "/profile/"+pageName +"/";
                            window.history.pushState({path:orgurl},'',newurl);
                        }else{
                            window.history.pushState({path:orgurl},'',"/profile/");
                        }

                        var i, tabcontent, tablinks;
                        tabcontent = document.getElementsByClassName("tabcontent");

                        $(tabcontent).hide();

                        tablinks = document.getElementsByClassName("tablink");
                        var pickedElem = document.getElementById(pageName);
                        $(pickedElem).show();
                        if(pageName != "EditAddresses"){
                            check();
                            var add = document.getElementById("stateselect").getAttribute('value');
                            document.getElementById("stateselect").value = add;
                        }
                    }

                        function check(){
                            var elem = document.getElementById("selectAddress");
                            
                            var addSelected = elem.options[elem.selectedIndex].text;
                            if (addSelected == "New Address")
                            { /* Make the empty address fields visible and hide all other fields*/

                                const addselectElement = document.querySelectorAll('.AddressOptions');
                                addselectElement.forEach(function(add) {
                                    add.style.display = "none";
                                });

                                var x = document.getElementById("NewAddress");
                                x.style.display= "inline";
                            }
                            else{
                                
                                const addselectElement = document.querySelectorAll('.AddressOptions');
                                var x = document.getElementById("NewAddress");
                                x.style.display= "none";
                                addselectElement.forEach(function(add) {
                                    var sel =add.id;
                                    
                                    if (sel == addSelected){
                                        add.style.display = "inline";
                                        var addNew = document.getElementById("stateselect "+ addSelected).getAttribute('value'); 
                                        document.getElementById("stateselect "+ addSelected).value = addNew;
                                    }
                                    else {
                                        add.style.display = "none";
                                    }
                                
                                });
                            
                                
                            }
                                    
                        }
                        !function(t){function a(a,r){t('.raterater-input[data-id="'+a+'"]').data("input").val(r).change()}function r(){g.each(function(){var a=t(this);if(p.mode==u&&("INPUT"==a.prop("tagName")||"SELECT"==a.prop("tagName"))){var r="input-"+y++,e=t('<div class="raterater-input"></div>').attr("data-id",r).attr("data-rating",a.val()).data("input",a);a.attr("data-id",r).attr("data-id",r).attr("data-rating",a.val()).data("input",a).after(e).hide(),l=a=e}l=a;var s=c(a);if(!s)throw"Error: Each raterater element needs a unique data-id attribute.";f[s]={state:"inactive",stars:null},"static"===a.css("position")&&a.css("position","relative"),a.addClass("raterater-wrapper"),a.html(""),t.each(["bg","hover","rating","outline","cover"],function(){a.append(' <div class="raterater-layer raterater-'+this+'-layer"></div>')});for(var n=0;n<p.numStars;n++)a.children(".raterater-bg-layer").first().append('<i class="fa fa-star"></i>'),a.children(".raterater-outline-layer").first().append('<i class="fa fa-star-o"></i>'),a.children(".raterater-hover-layer").first().append('<i class="fa fa-star"></i>'),a.children(".raterater-rating-layer").first().append('<i class="fa fa-star"></i>');p.isStatic||(a.find(".raterater-cover-layer").hover(o,h),a.find(".raterater-cover-layer").mousemove(d),a.find(".raterater-cover-layer").click(i))})}function e(){g.each(function(){var a;a=p.mode==u?t(this).parent().find('.raterater-input[data-id="'+c(this)+'"]'):t(this);var r=(c(a),p.width+"px"),e=Math.floor(p.starWidth/p.starAspect)+"px";a.css("width",r).css("height",e),a.find(".raterater-layer").each(function(){t(this).css("width",r).css("height",e)});for(var i=0;i<p.numStars;i++)t.each(["bg","hover","rating","outline"],function(){a.children(".raterater-"+this+"-layer").first().children("i").eq(i).css("left",i*(p.starWidth+p.spaceWidth)+"px").css("font-size",Math.floor(p.starWidth/p.starAspect)+"px")});var s=parseFloat(a.attr("data-rating")),d=Math.floor(s),o=s-d;n(a.find(".raterater-rating-layer").first(),d,o)})}function i(r){var e=t(r.target).parent(),i=c(e),s=f[i].whole_stars_hover+f[i].partial_star_hover;s=Math.round(100*s)/100,f[i].state="rated",f[i].stars=s,e.find(".raterater-hover-layer").addClass("rated"),"input"!=p.mode&&void 0!==window[p.submitFunction]&&"function"==typeof window[p.submitFunction]?window[p.submitFunction](i,s):a(i,s)}function s(t,a){var r=Math.floor(t/(p.starWidth+p.spaceWidth)),e=t-r*(p.starWidth+p.spaceWidth);if(e>p.starWidth&&(e=p.starWidth),e/=p.starWidth,p.step!==!1){var i=1/p.step;e=Math.round(e*i)/i}f[a].whole_stars_hover=r,f[a].partial_star_hover=e}function n(t,a,r){for(var e=(c(t.parent()),0);a>e;e++)t.find("i").eq(e).css("width",p.starWidth+"px");t.find("i").eq(a).css("width",p.starWidth*r+"px");for(var e=a+1;e<p.numStars;e++)t.find("i").eq(e).css("width","0px")}function d(a){var r=c(t(a.target).parent());if("hover"===f[r].state){var e=a.offsetX;void 0===e&&(e=a.pageX-t(a.target).offset().left),f[r].stars=s(e,r);var i=t(a.target).parent().children(".raterater-hover-layer").first();n(i,f[r].whole_stars_hover,f[r].partial_star_hover)}}function o(a){var r=c(t(a.target).parent());("rated"!==f[r].state||p.allowChange)&&(f[r].state="hover",t(a.target).parent().children(".raterater-rating-layer").first().css("display","none"),t(a.target).parent().children(".raterater-hover-layer").first().css("display","block"))}function h(a){var r=t(a.target).parent(),e=c(r);if(t(a.target).parent().children(".raterater-hover-layer").first().css("display","none"),t(a.target).parent().children(".raterater-rating-layer").first().css("display","block"),"rated"===f[e].state){var i=parseFloat(f[e].stars),s=Math.floor(i),d=i-s;return void n(r.find(".raterater-rating-layer").first(),s,d)}f[e].state="inactive"}function c(a){return t(a).attr("data-id")}var l,f={},p={},u="input",v="callback",g=null,y=0;t.fn.raterater=function(a){if(t.fn.raterater.defaults={submitFunction:"",allowChange:!1,starWidth:20,spaceWidth:5,numStars:5,isStatic:!1,mode:v,step:!1},p=t.extend({},t.fn.raterater.defaults,a),p.width=p.numStars*(p.starWidth+p.spaceWidth),p.starAspect=.9226,p.step!==!1&&(p.step=parseFloat(p.step),p.step<=0||p.step>1))throw"Error: step must be between 0 and 1";return g=this,r(),e(),this}}(jQuery);

                            $(document).ready(function() {
                                $('.ratebox').raterater({
                                    submitFunction: 'rateAlert',
                                    allowChange: false,
                                    starWidth: 15,
                                    spaceWidth: 2,
                                    numStars: 5
                                });

                            });
                        
                            document.getElementById("defaultOpen").click();

                    // Get the element with id="defaultOpen" and click on it
                   
                </script>
                

            </main>
        </div>
    </div>
</body>
{% endblock %}
